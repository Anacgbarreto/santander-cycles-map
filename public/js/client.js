"use strict";function initMap(){function e(){fetch("https://api.tfl.gov.uk/bikepoint").then(function(e){return e.json()}).then(function(e){var i=void 0,n=void 0,r=void 0,l=void 0,a=!0,s=!1,p=void 0;try{for(var c,y=e[Symbol.iterator]();!(a=(c=y.next()).done);a=!0)!function(){var e=c.value,a=new google.maps.LatLng(e.lat,e.lon),s=new google.maps.Marker({position:a,map:t}),p=parseInt(e.additionalProperties.find(function(e){return"NbBikes"===e.key}).value),y=parseInt(e.additionalProperties.find(function(e){return"NbEmptyDocks"===e.key}).value),d=Math.round(google.maps.geometry.spherical.computeDistanceBetween(o,a)),f=new google.maps.InfoWindow({content:'<div id="content"><h1 id="firstHeading" class="firstHeading">'+e.commonName+"</h1><p>Available bikes: "+p+"</p><p>Empty docks: "+y+"</p><p>Distance from you: "+d+" metres</p></div>"});f.addListener("closeclick",function(){i=null}),p>0&&(!r||d<l)&&(r=f,l=d,n=s),s.addListener("click",function(){i&&i.close(),i=f,f.open(t,s)})}()}catch(e){s=!0,p=e}finally{try{!a&&y.return&&y.return()}finally{if(s)throw p}}i=r,r.open(t,n)})}var t=new google.maps.Map(document.getElementById("map"),{zoom:15,styles:[{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#e0efef"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#1900ff"},{color:"#c0e8e8"}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"all",stylers:[{color:"#7dcdcd"}]}]}),o=void 0;navigator.geolocation.getCurrentPosition(function(i){document.querySelector("#loading").remove();var n=new google.maps.LatLng(i.coords.latitude,i.coords.longitude);o=n,e(),t.setCenter(n),new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:t,center:n,radius:1e3}),new google.maps.Circle({strokeColor:"green",strokeOpacity:.8,strokeWeight:2,fillColor:"green",fillOpacity:.35,map:t,center:n,radius:25})})}